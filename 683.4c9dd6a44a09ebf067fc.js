"use strict";(self.webpackChunkUlbiTV_frontend=self.webpackChunkUlbiTV_frontend||[]).push([[683],{8263:function(e,t,a){a.d(t,{c:function(){return b}});var n,r=a(3007),s=a(5443),l=a(1554),c=a(8699),i=a(9457),o={starIcon:"Z1C6YFZ0",normal:"Yv7EH3L0",hovered:"QpbxqwVr",isSelected:"aEL4cEw5"},u=a(7294);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}var h=e=>u.createElement("svg",d({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=u.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),p=a(8787),g=a(5893);const x=[1,2,3,4,5],v=e=>{let{className:t,onSelect:a,size:n=30,selectedStars:s=0}=e;const[l,c]=(0,u.useState)(s),[i,d]=(0,u.useState)(Boolean(s)),v=()=>{i||c(0)},j=e=>()=>{i||(a?.(e),c(e),d(!0))};return(0,g.jsx)("div",{className:(0,r.A)(o.starrating,{},[t]),children:x.map((e=>{return(0,g.jsx)(p.J,{className:(0,r.A)(o.starIcon,{[o.hovered]:l>=e,[o.normal]:l<e,[o.isSelected]:i},[]),Svg:h,width:n,height:n,onMouseEnter:(t=e,()=>{i||c(t)}),onMouseLeave:v,onClick:j(e),"data-selected":l>=e},e);var t}))})};var j=a(5621),f=a(11),m=a(9499),k=a(5518),C=a(1498);const b=e=>{let{className:t,title:a,feedbackTitle:n,hasFeedback:o,onCancel:d,onAccept:h,rate:p=0}=e;const{t:x}=(0,s.$)(),[b,y]=(0,u.useState)(!1),[S,I]=(0,u.useState)(p),[N,A]=(0,u.useState)(""),L=(0,u.useCallback)((e=>{I(e),o?h?.(e):y(!0)}),[o,h]),w=(0,u.useCallback)((()=>{y(!1),h?.(S,N)}),[N,h,S]),E=(0,u.useCallback)((()=>{y(!1),d?.(S)}),[d,S]),O=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.xv,{title:n}),(0,g.jsx)(f.I,{value:N,onChange:e=>{A(e)},placeholder:x("Ваш отзыв")})]});return(0,g.jsxs)(l.Z,{className:(0,r.A)("VueTCxH4",{},[t]),children:[(0,g.jsxs)(i.g,{align:"center",gap:"8",children:[(0,g.jsx)(c.xv,{title:S?x("Спасибо за оценку!"):a}),(0,g.jsx)(v,{size:40,onSelect:L,selectedStars:S})]}),(0,g.jsx)(k.I3,{children:(0,g.jsx)(j.u,{isOpen:b,lazy:!0,children:(0,g.jsxs)(i.g,{gap:"32",children:[O,(0,g.jsxs)(i.U,{max:!0,gap:"16",justify:"end",children:[(0,g.jsx)(m.zx,{theme:m.bn.OUTLINE_RED,onClick:E,children:x("Закрыть")}),(0,g.jsx)(m.zx,{onClick:w,children:x("Отправить")})]})]})})}),(0,g.jsx)(k.$,{children:(0,g.jsx)(C.d,{isOpen:b,lazy:!0,onClose:E,children:(0,g.jsxs)(i.g,{gap:"32",children:[O,(0,g.jsx)(m.zx,{onClick:w,size:m.qE.L,fullWidth:!0,children:x("Отправить")})]})})})]})}},11:function(e,t,a){a.d(t,{I:function(){return c}});var n=a(7294),r=a(3007),s={inputWrapper:"yiPASP1v",placeholder:"emAQQ85i",input:"LVdIPwcx",caretWrapper:"y1GiFC_L",caret:"lqMFGBuL",blink:"M7n8faAU",readonly:"fTN1PnWu"},l=a(5893);const c=(0,n.memo)((e=>{let{className:t,value:a="",onChange:c,type:i="text",placeholder:o,autoFocus:u,readonly:d,...h}=e;const[p,g]=(0,n.useState)(!1),[x,v]=(0,n.useState)(0),j=p&&!d,f=(0,n.useRef)(null);(0,n.useEffect)((()=>{u&&(g(!0),f.current?.focus())}),[u]);const m={[s.redonly]:d};return(0,l.jsxs)("div",{className:(0,r.A)(s.inputWrapper,m,[t]),children:[o&&(0,l.jsx)("div",{className:s.placeholder,children:`${o}>`}),(0,l.jsxs)("div",{className:s.caretWrapper,children:[(0,l.jsx)("input",{type:i,value:a,onChange:e=>{if(a?.toString().length>e?.target?.value?.length)return c?.(e.target.value),void v(e?.target?.selectionStart||0);c?.(e.target.value),v(e.target.value.length)},className:s.input,onFocus:()=>{g(!0)},onBlur:()=>{g(!1)},onSelect:e=>{v(e?.target?.selectionStart||0)},ref:f,readOnly:d,...h}),j&&(0,l.jsx)("span",{className:s.caret,style:{left:9*x+"px"}})]})]})}))},8683:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(5443),r=a(8263);const s=a(6628).p.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{articleId:t,userId:a}=e;return{url:"/article-ratings",params:{userId:a,articleId:t}}}}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),l=s.useGetArticleRatingQuery,c=s.useRateArticleMutation;var i=a(1992),o=a(919),u=a(7050),d=a(7294),h=a(5893),p=e=>{let{className:t,articleId:a}=e;const{t:s}=(0,n.$)(),p=(0,i.v9)(o.m5),{data:g,isLoading:x}=l({articleId:a,userId:p?.id??""}),[v]=c(),j=(0,d.useCallback)(((e,t)=>{try{v({articleId:a,userId:p?.id??"",rate:e,feedback:t})}catch(e){console.log(e)}}),[a,v,p?.id]),f=(0,d.useCallback)(((e,t)=>j(e,t)),[j]),m=(0,d.useCallback)((e=>j(e)),[j]);if(x)return(0,h.jsx)(u.O,{width:"100%",height:120});const k=g?.[0];return(0,h.jsx)(r.c,{onCancel:m,onAccept:f,rate:k?.rate,className:t,title:s("Оцените статью"),feedbackTitle:s("Оставьте свой отзыв о статье, это поможет улучшить качество")})}}}]);